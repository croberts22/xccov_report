<p id="notice"><%= notice %></p>

<% @coverage_targets.each do |target| %>
  <h2><%= target.name %></h2>
  <% sorted_files(target.coverage_files).each do |file| %>
    <h3><%= file.name %></h3>
    <div class="table-responsive">
      <table class="table">
        <thead>
        <tr>
          <th><div class="th-inner sortable both">Function</div></th>
          <th>Covered lines</th>
          <th>Line coverage</th>
          <th>Line number</th>
          <th>Execution count</th>
          <th>Executable lines</th>
<!--          <th colspan="3"></th>-->
        </tr>
        </thead>

        <tbody>
        <% sorted_functions(file.functions).each do |function| %>
          <tr class=<%= row_class(function) %> >
            <td><%= function.name %></td>
            <td><%= function.covered_lines %></td>
            <td><%= number_to_code_coverage_percentage(function.line_coverage) %></td>
            <td><%= function.line_number %></td>
            <td><%= function.execution_count %></td>
            <td><%= function.executable_lines %></td>
<!--            <td><%#= link_to 'Show', function %></td>-->
<!--            <td><%#= link_to 'Edit', edit_function_path(function) %></td>-->
<!--            <td><%#= link_to 'Destroy', function, method: :delete, data: { confirm: 'Are you sure?' } %></td>-->
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  <% end %>
<% end %>

<p>
  <strong>Covered lines:</strong>
  <%= @coverage_report.covered_lines %>
</p>

<p>
  <strong>Line coverage:</strong>
  <%= @coverage_report.line_coverage %>
</p>

<p>
  <strong>Coverage targets:</strong>
  <%= @coverage_report.coverage_targets %>
</p>

<p>
  <strong>Executable lines:</strong>
  <%= @coverage_report.executable_lines %>
</p>

<%= link_to 'Edit', edit_coverage_report_path(@coverage_report) %> |
<%= link_to 'Back', coverage_reports_path %>
